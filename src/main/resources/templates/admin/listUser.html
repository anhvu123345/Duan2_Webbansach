<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="employee/layout :: head">
<style type="text/css">
</style>
</head>
<body>
	<div id="wrapper">

		<nav th:replace="employee/layout :: sidebar"></nav>

		<div id="page-wrapper">
			<div class="row">
				<div class="col-sm-12">
					<h3 class="page-header">Quản lý tài khoản</h3>
				</div>
				<!-- /.col-sm-12 -->
			</div>

			<div class="row">
				<div class="col-sm-12">
					<div th:if="${success}"
						class="row alert alert-success alert-dismissible">
						<button type="button" class="close" data-dismiss="alert">
							<span>&times;</span>
						</button>
						<span th:text="${success}"></span>
					</div>

					<div class="panel panel-primary">
						<div class="panel-heading">Quản lý tài khoản</div>
						<!-- /.panel-heading -->
						<div class="panel-body">
							<h4 th:if="${#lists.isEmpty(users)}"></h4>
							<form action="#" th:action="@{/user/setrole}"
								th:object="${userRole}" method="POST">
								<table th:unless="${#lists.isEmpty(users)}" width="100%"
									class="table table-striped table-bordered"
									id="dataTables-example">
									<thead>
										<tr>
											<th width="">Mã</th>
											<th width="">Email</th>
											<th width="">Loại Tài Khoản</th>
											<th width="">Tên</th>
											<th width="">Họ</th>
											<th width="">Tùy chọn</th>
										</tr>
									</thead>

									<tbody>
										<tr th:each="user, list : ${users}">
											<td th:text="${user.userid}"></td>
											<td th:text="${user.email}"></td>
											<td th:text="${user.fristname}"></td>
											<td th:text="${user.fullname}"></td>
											<!-- <=============Dùng css hiển thị radio cho admin và user, listuser là list được tạo trong UserController, [lists.index] dùng để đặt số thứ tự tăng dần theo số lượng tài khoản===============> -->
											<td style="text-align: center; vertical-align: middle">
												<div class="switch">
													<input type="radio" class="switch-input"
														th:name="${'listuser[' + list.index +'].role'}"
														th:id="${'week'+ list.index}"
														th:checked="${user.role == 'ROLE_USER'}"
														value="ROLE_USER"> <label
														th:for="${'week'+ list.index}"
														class="switch-label switch-label-off">USER</label> <input
														type="radio" class="switch-input"
														th:name="${'listuser[' + list.index +'].role'}"
														th:checked="${user.role == 'ROLE_ADMIN'}" value="ROLE_ADMIN"
														th:id="${'month'+ list.index}"> <label
														th:for="${'month'+ list.index}"
														class="switch-label switch-label-on">ADMIN</label> <span
														class="switch-selection"></span>
												</div>
											</td>
											<!-- <=================================================================================================================> -->
											
											
											<!-- <=============<td> ẩn nút input giá trị để save tài khoản giúp thay đổi ROLE không mất dữ liệu===============> -->
											<td style="display: none"><input type="hidden"
												th:name="${'listuser[' + list.index +'].email'}"
												th:value="${user.email}" /></td>
											<td style="display: none"><input type="hidden"
												th:name="${'listuser[' + list.index +'].userid'}"
												th:value="${user.userid}" /></td>
											<td style="display: none"><input type="hidden"
												th:name="${'listuser[' + list.index +'].fristname'}"
												th:value="${user.fristname}" /></td>
											<td style="display: none"><input type="hidden"
												th:name="${'listuser[' + list.index +'].fullname'}"
												th:value="${user.fullname}" /></td>
											<td style="display: none"><input type="hidden"
												th:name="${'listuser[' + list.index +'].password'}"
												th:value="${user.password}" /></td>
											<td style="display: none"><input type="hidden"
												th:name="${'listuser[' + list.index +'].token'}"
												th:value="${user.token}" /></td>
											<td style="display: none"><input type="hidden"
												th:name="${'listuser[' + list.index +'].active'}"
												th:value="${user.active}" /></td>
											<!-- <=================================================================================================================> -->
											<td>
												<ul>
													<li style="list-style: none"><a
														th:href="@{/admin/user/{id}/delete(id=${user.userid})}"
														class="btn btn-danger">Xóa</a></li>
												</ul>
											</td>

										</tr>
									</tbody>

								</table>
								<div align="center">
									<button type="submit" id="submit" class="btn btn-primary">
										<i class="fa fa-save"></i>Lưu
									</button>
								</div>
							</form>
							<!-- /.table-responsive -->
						</div>
						<!-- /.panel-body -->
					</div>
					<!-- /.panel -->
				</div>
				<!-- /.col-sm-12 -->
			</div>
			<!-- /.row -->
		</div>
		<!-- /#page-wrapper -->

	</div>

</body>
</html>